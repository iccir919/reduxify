(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);a(69);var n=a(0),r=a.n(n),o=a(24),c=a.n(o),s=a(37),i=a(21),l=a(12),u=a(13),m=a(61),p=a(14),h="FETCH_USER_PROFILE",d="FETCH_TOP_ARTISTS_LONG_TERM",f="FETCH_TOP_ARTISTS_MEDIUM_TERM",g="FETCH_TOP_ARTISTS_SHORT_TERM",E={token:localStorage.getItem("token")||"",errorMessage:""},v={profile:null};var O={longTerm:[],mediumTerm:[],shortTerm:[]};var A=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth_user":return Object(p.a)({},e,{token:t.payload});case"auth_error":return Object(p.a)({},e,{errorMessage:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(p.a)({},e,{profile:t.payload});default:return e}},topArtists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(p.a)({},e,{longTerm:t.payload});case f:return Object(p.a)({},e,{mediumTerm:t.payload});case g:return Object(p.a)({},e,{shortTerm:t.payload});default:return e}}}),y=(a(78),a(15)),b=a(16),T=a(20),k=a(17),j=a(19),C=a(30),R=a.n(C),S=(a(79),{API_URL:"https://api.spotify.com/v1",SPOTIFY_AUTHORIZE_URL:"https://accounts.spotify.com/authorize",SPOTIFY_AUTH_SCOPES:"user-read-recently-played playlist-modify-public user-top-read",SPOTIFY_CLIENT_ID:"6b7ddc5726414d27adc6f68d816af4a6",CALLBACK_URL:"".concat(window.location.origin,"/")}),L=a(44),w=function(e,t){var a=e;return Object(L.isObject)(t)&&!Object(L.isEmpty)(t)&&(a+="?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")),a},I=function(){var e=RegExp("[#&]access_token=([^&]*)").exec(window.location.hash);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},_=function(e){function t(){return Object(y.a)(this,t),Object(T.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.verifyToken()}},{key:"componentDidUpdate",value:function(){this.props.token&&this.props.history.push("/topArtists")}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"reduxify-landing-logo"},r.a.createElement("img",{src:R.a}),"Reduxify"),r.a.createElement("h2",{className:"catch-phrase"},"You are what you stream"),r.a.createElement("h3",{className:"directions"},"Log-in to interact with your recent Spotify history"),r.a.createElement("button",{id:"login-button",onClick:this.props.authorizeUser,className:"button-rounded"},r.a.createElement("div",{className:"text"},"Get Started")))}}]),t}(n.Component),B={authorizeUser:function(){return function(e){var t=w(S.SPOTIFY_AUTHORIZE_URL,{client_id:S.SPOTIFY_CLIENT_ID,redirect_uri:S.CALLBACK_URL,scope:S.SPOTIFY_AUTH_SCOPES,response_type:"token"});location.href=t}},verifyToken:function(){return function(e){var t=I();t&&(localStorage.setItem("token",t),e({type:"auth_user",payload:t}))}}},N=Object(l.b)(function(e){return{token:e.auth.token}},B)(_),U=a(122),Q=a(126),x=a(117),G=a(118),H=a(119),J=a(123),M=a(125),P=a(25),D=a.n(P),K=a(31),Y=a(62),F=a.n(Y).a.create({baseURL:S.API_URL,responseType:"json",headers:{Accept:"application/json","Content-Type":"application/json"}}),X=a(124),q=(a(99),function(e){function t(){return Object(y.a)(this,t),Object(T.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserProfile()}},{key:"render",value:function(){return this.props.user.profile?r.a.createElement(X.a,{expand:"md"},r.a.createElement(X.a.Brand,{id:"reduxify-logo"},r.a.createElement("img",{src:R.a}),"Reduxify"),r.a.createElement(X.a.Toggle,null),r.a.createElement(X.a.Collapse,null,r.a.createElement(x.a,null,r.a.createElement(G.a,null,r.a.createElement(H.a,{md:7},r.a.createElement(M.a,null,r.a.createElement(M.a.Item,null,r.a.createElement(s.b,{className:"nav-link",to:"/topArtists"},"Top Artists")),r.a.createElement(M.a.Link,{disabled:!0},"Top Songs"),r.a.createElement(M.a.Link,{disabled:!0},"Recent"))),r.a.createElement(H.a,{md:5},r.a.createElement(M.a,{className:"justify-content-end"},r.a.createElement(M.a.Link,{className:"font-weight-bold",href:this.props.user.profile.external_urls.spotify},this.props.user.profile.display_name),r.a.createElement(M.a.Link,{onClick:this.props.signOut},"Logout"))))))):null}}]),t}(r.a.Component)),z={fetchUserProfile:function(){return function(){var e=Object(K.a)(D.a.mark(function e(t){var a,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),e.next=4,F.get("/me",{headers:{Authorization:"Bearer ".concat(a)}});case 4:n=e.sent,t({type:h,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},signOut:function(){return localStorage.removeItem("token"),{type:"auth_user",payload:""}}},Z=Object(l.b)(function(e){return{user:e.user}},z)(q),W=a(120),V=a(121),$=function(e){var t={};e.artists.forEach(function(e){e.genres.forEach(function(e){t[e]?t[e]+=1:t[e]=1})});var a=[];for(var n in t)t[n]>2&&a.push(n);for(var o=[[]],c=0;c<Math.ceil(a.length/2);c++){for(var s=[],i=0;i<2;i++)s.push(a[2*c+i]);o.push(s)}return r.a.createElement("div",null,r.a.createElement("h3",null,"Genres"),r.a.createElement("div",null,r.a.createElement(W.a,{onClick:e.changeGenre,value:"all genres",className:"mr-3 mb-3"},"all genres"),o.map(function(t){return r.a.createElement(V.a,null,t.map(function(t){if(t)return r.a.createElement(W.a,{onClick:e.changeGenre,value:t,className:"mr-3 mb-3 "},t)}))})))},ee=(a(114),function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={timeRange:"long_term",genreSelection:"all genres"},a}return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTopArtists(this.state.timeRange)}},{key:"handleGenreChange",value:function(e){this.setState({genreSelection:e.currentTarget.value})}},{key:"handleTimePeriodChange",value:function(e){0===this.props[e].length?(this.props.fetchTopArtists(e),this.setState({timeRange:e,genreSelection:"all genres"})):this.setState({timeRange:e,genreSelection:"all genres"})}},{key:"renderList",value:function(){var e=this;return 0===this.props[this.state.timeRange].length?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement(U.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement(Q.a,{variant:"flush"},this.props[this.state.timeRange].map(function(t,a){return"all genres"===e.state.genreSelection||t.genres.includes(e.state.genreSelection)?r.a.createElement(Q.a.Item,null,r.a.createElement(x.a,null,r.a.createElement(G.a,null,r.a.createElement(H.a,null,r.a.createElement("h5",{className:"font-weight-bold"},a+1)),r.a.createElement(H.a,null,r.a.createElement(J.a,{className:"thumbnail",src:t.images[2].url})),r.a.createElement(H.a,{xs:8},r.a.createElement("h6",{className:"align-items-center"},t.name))))):null}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"top-artists-page"},r.a.createElement(Z,null),r.a.createElement("h1",{className:"page-header"},"Top Artists"),r.a.createElement("h3",{className:"page-sub-header"},"Get ready to feel cool. Or much less cool than you thought."),r.a.createElement(x.a,{className:"justify-content-center"},r.a.createElement(M.a,{fill:!0,defaultActiveKey:"long_term",onSelect:function(t){return e.handleTimePeriodChange(t)}},r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"long_term",className:"selector-item"},"All time")),r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"medium_term",className:"selector-item"},"Last 6 months")),r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"short_term",className:"selector-item"},"Last month"))),r.a.createElement(G.a,null,r.a.createElement(H.a,{md:{span:6,offset:1}},this.renderList()),r.a.createElement(H.a,{md:5},r.a.createElement($,{changeGenre:this.handleGenreChange.bind(this),artists:this.props[this.state.timeRange]})))))}}]),t}(n.Component)),te={fetchTopArtists:function(e){return function(){var t=Object(K.a)(D.a.mark(function t(a){var n,r;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=localStorage.getItem("token"),t.next=4,F.get("/me/top/artists",{headers:{Authorization:"Bearer ".concat(n)},params:{limit:50,time_range:e}});case 4:r=t.sent,"long_term"===e?a({type:d,payload:r.data.items}):"medium_term"===e?a({type:f,payload:r.data.items}):"short_term"===e&&a({type:g,payload:r.data.items}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()}},ae=Object(u.d)(Object(l.b)(function(e){return{long_term:e.topArtists.longTerm,medium_term:e.topArtists.mediumTerm,short_term:e.topArtists.shortTerm}},te),function(e){var t=function(t){function a(){return Object(y.a)(this,a),Object(T.a)(this,Object(k.a)(a).apply(this,arguments))}return Object(j.a)(a,t),Object(b.a)(a,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.token||this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(n.Component);return Object(l.b)(function(e){return{token:e.auth.token}})(t)})(ee),ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,re=Object(u.e)(A,ne(Object(u.a)(m.a)));c.a.render(r.a.createElement(l.a,{store:re},r.a.createElement(s.a,null,r.a.createElement(function(e){var t=e.children;return r.a.createElement("div",{className:"app-container"},t)},null,r.a.createElement(i.a,{path:"/",exact:!0,component:N}),r.a.createElement(i.a,{path:"/topArtists",exact:!0,component:ae})))),document.querySelector("#root"))},30:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFgElEQVR4nO2b328UVRTHv2dmygQWEozgxsIOC6IGioVuaYnxRfgHCIE1Gi1s7VZJIT4oBp+ghhdJo0+0IXZrKUg0blT+AvTNSO1WkJbE8GM7hZoCRhJatwszc3zYLZa6OzM7nV1m1/287dwz937nzDn33L17F6hSpUqVMkJpiJ7y17f43OpPcKujkkHYJ0vyoLK5vc6N7srPARk2QOTBQKg9stCOytUBALCYwP0LTYlydkCGBaZE+Tsgg+OUqBQHAA5TopIckKHAlCCn46ze8u7zoqjtBKORQbUAPwtQLQDXavQCSTGoYzzRe8rMqCAHrN0W9WsaHyTQLjBcqcNFhzGQ1tMHJi+dmc7VbMsBL77y9rJUSvgAwCF45w0XwhXoFFYv9o7Mb7B0wJqG9t1M3APgmaJIKx05U0LKb98pKKGbRxh8tMjCnig5I6C28Z0lEowBMPaUWlBxoFHoeC1XCuQog52CxPrpinl4xkBam2nO9fBAjhRQQjePALS7+MqKTibnhwsog0pDdA8IcdtDEG7AoK8BnBekh5eTvuBd/NipOZJrEyUUZRvC8ob8fB5FQKbUodueDE4CwmF13b1vEY/r9u4pEYyBtD6Tt+7P55EDUinhfdgrdWdTaXn/nZGeKSScqiwKtkIeAFY173361oXTfwLZSXDttqgfmUWOFV1qItZyZ6RnakFSXYdGoVOT1bIXAJTGtn2iJl8PbtkfBLIRoD3AASIstbj3rJqIHQZgIwdLiM2Q99e3+GRp0QkwRQCGTtpBAIckACDCLothxlLpRfvhrYe3HfJKQ+tGkBQHeOPsNQLeQjh8WFodalsPYJNZB8z0kbfCPjPLj9uY5TObJNwN8JLHu4Bfuf7Uy4JItNO8C06Or79nvzQWG4uFzVwCofYuAvcDWJLbQt8hAWg0H1D4ykulTh2ORezaEuOh6dc9pq0CGLWmvYj8g90BPch5i/YXBAabOoBYuOyioJIiSA+ttNcK2W2svIwtq73joqaSkvQF71qYLBNQnjs8bjElALhvZhGcTq4okRjXWXN/YqVZOxEmBAATZkaGVmO6RvAyTIapdsPIOOB3i352uCepxOi03cJiQgDxL2YWTKixM5a/vsWnNEYHbIsrNuGwCDLeMDMRBCQEQMxXK/8GcWQ80fuh1ViBrW2bZEkeBGOvI7FFIHB1eRigoJmNAeGcoK776ycwJh9volGw3qQO9Vm+0UAo2koGXQCwwblcd1lZ17GUiD+xMPttfOjzawLicZ2BL2evEtCf1maa1eH+UbO7Z0OegC8ALHZDuEvQYvnBSQBrTK2Yvgey+wEiSycM0qJgvDc2HDttNUJga9smMugbsHfeehZSQtHjAN60sJuq0cVuIOuA5K8nk6ua9z43u01kRibk0Q1vvXWsrOtYmn3zVg8PEHddu3TyNjBnT9Dq4f31LT65Ru7x0kQHAAiHReXa8t1A+rjVpJfldmpG/mz2g8lPY//iqZB/tVMKTidXGCy9BJ224zq/DvBauz90E1PH3M0dy7sCoWgrwXsh75BONRH7eO6FvBHg2ZB3DMXVxKpj86/mdICnQt4VKK4RRYBO4z8t8y9UWMgDxEfVob5jyLOjnSMCiL21++0QxiQROsaG+r4zM8s5CSqb2+sgchweWt4WwDSArlR60ad2tvLzVgF/fYtPFuVuEPa5Kq94XGbic5JEJ278HJu0Ns9gowy2RwjcA+/MCdNEuAXGHyBMAJzQGeduJvquOunM1uqhkJRQEzHHZw+fBLZOiqoXe0fSWroJDO9seLiE7aOyk5fOTKvDsQiDWgGkiqippBR8Vng80XsKOjUBuFIEPSXH0WHpSkoJx6fFKyUlFnxcvtxTwpX/C1RSSlSpUuX/xT/50w13f4EprgAAAABJRU5ErkJggg=="},68:function(e,t,a){e.exports=a(115)},78:function(e,t,a){},79:function(e,t,a){},99:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.b89c159e.chunk.js.map